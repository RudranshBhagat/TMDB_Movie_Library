<div class="container my-3">
  <div class="input-group">
    <input
      type="text"
      class="form-control"
      placeholder="Search movies..."
      [(ngModel)]="searchQuery"
    />
    <button class="btn btn-primary" type="button" (click)="searchMovies()">
      Search
    </button>
  </div>

  <!-- View Switch Buttons -->
  <div class="mt-3 d-flex justify-content-end gap-2">
    <button
      class="btn btn-outline-primary btn-sm"
      [class.active]="viewMode === 'grid'"
      (click)="setView('grid')"
    >
      <i class="fa fa-th-large"></i> Grid
    </button>
    <button
      class="btn btn-outline-primary btn-sm"
      [class.active]="viewMode === 'list'"
      (click)="setView('list')"
    >
      <i class="fa fa-list"></i> List
    </button>
    <button
      class="btn btn-outline-primary btn-sm"
      [class.active]="viewMode === 'compact'"
      (click)="setView('compact')"
    >
      <i class="fa fa-th"></i> Compact
    </button>
  </div>
</div>

<!-- GRID VIEW -->
<div class="container my-4" *ngIf="viewMode === 'grid'">
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3">
    <div class="col" *ngFor="let movie of movies">
      <app-movie-card
        [movie]="movie"
        (action)="addToWatchlist($event)"
      ></app-movie-card>
    </div>
  </div>
</div>

<!-- LIST VIEW -->
<div class="container my-4" *ngIf="viewMode === 'list'">
  <div
    class="card mb-3 p-2 shadow-sm"
    *ngFor="let movie of movies"
    style="display: flex; flex-direction: row; align-items: center"
  >
    <img
      [src]="'https://image.tmdb.org/t/p/w200' + movie.poster_path"
      class="rounded"
      style="width: 80px; height: 120px; object-fit: cover; margin-right: 15px"
    />
    <div class="flex-grow-1">
      <h5>{{ movie.title }}</h5>
      <p class="text-muted mb-1">
        {{ movie.release_date | date: 'longDate' }}
      </p>
      <button class="btn btn-sm btn-primary" (click)="addToWatchlist(movie)">
        Add to Watchlist
      </button>
    </div>
  </div>
</div>

<!-- COMPACT VIEW -->
<div class="container my-4" *ngIf="viewMode === 'compact'">
  <ul class="list-group">
    <li
      class="list-group-item d-flex justify-content-between align-items-center"
      *ngFor="let movie of movies"
    >
      <span>{{ movie.title }}</span>
      <button class="btn btn-sm btn-outline-primary" (click)="addToWatchlist(movie)">
        +
      </button>
    </li>
  </ul>
</div>
